---
import { Image } from "astro:assets"

import jsonData from "../assets/teachers.json"

const images  = import.meta.glob("../assets/teachers/*")
const entries = Object.entries(images)
---

<script>
  import "node_modules/swiped-events/dist/swiped-events.min.js"
</script>

<section
  x-data="{current: 0}"
  class="text-5xl flex flex-col gap-10 justify-around items-center relative w-full"
  @swiped-right={`current = current <= 0 ? ${entries.length - 1}: current - 1`}
  @swiped-left={`current = ${entries.length} - current - 1 > 0 ? current + 1 : 0`}
>
  <button
    @click={`current = current <= 0 ? ${entries.length - 1}: current - 1`}
    class="absolute left-0 w-1/3 h-full"></button>
  {
    entries.map(([key, value], index) => (
      <Image
        src={value()}
        alt="Преподаватель Para Bailar"
        x-show={`current == ${index}`}
        class="object-cover w-full max-w-screen-sm"
      />
    ))
  }
  <button
    @click={`current = ${entries.length} - current - 1 > 0 ? current + 1 : 0`}
    class="absolute right-0 w-1/3 h-full"></button>

  <div
    class="flex gap-4 w-full flex justify-center items-center"
  >
    {
      entries.map((_, index) => (
        <div class="bg-gray-300 w-6 h-6 rounded-full" :class={`current === ${index} && 'bg-gray-900'`} />
      ))
    }
  </div>

  { jsonData.map((item, index) => (
  <div 
    class="flex flex-col gap-8 text-center" 
    x-show={`current === ${index}`}
    x-transition
  >
    <h2 class="text-red-800">{item.h2}</h2>
    <h3>{item.h3}</h3>
    <ul class="list-disc text-3xl px-16 text-left">
      {item.list.map(listItem => (
      <li>{listItem}</li>
      ))}
    </ul>
  </div>))}
</section>
</section>
